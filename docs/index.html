<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-900">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/alpinejs-playground/logo.svg" />
    <title>Alpine.js Live Playground</title>
    <meta name="description" content="A live coding playground for Alpine.js that supports TailwindCSS and shareable URLs" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://james2doyle.github.io/alpinejs-playground/" />
    <meta property="og:title" content="Alpine.js Live Playground" />
    <meta property="og:description" content="A live coding playground for Alpine.js that supports TailwindCSS and shareable URLs" />
    <meta property="og:image" content="https://james2doyle.github.io/alpinejs-playground/social-preview.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://james2doyle.github.io/alpinejs-playground/" />
    <meta property="twitter:title" content="Alpine.js Live Playground" />
    <meta property="twitter:description" content="A live coding playground for Alpine.js that supports TailwindCSS and shareable URLs" />
    <meta property="twitter:image" content="https://james2doyle.github.io/alpinejs-playground/social-preview.png" />

    <style type="text/css">
        /*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
        @layer properties;
        @layer theme, base, components, utilities;
        @layer theme {
          :root, :host {
            --font-sans: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
            'Noto Color Emoji';
            --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
            monospace;
            --color-blue-100: oklch(93.2% 0.032 255.585);
            --color-blue-400: oklch(70.7% 0.165 254.624);
            --color-blue-500: oklch(62.3% 0.214 259.815);
            --color-slate-100: oklch(96.8% 0.007 247.896);
            --color-slate-200: oklch(92.9% 0.013 255.508);
            --color-slate-400: oklch(70.4% 0.04 256.788);
            --color-slate-500: oklch(55.4% 0.046 257.417);
            --color-slate-800: oklch(27.9% 0.041 260.031);
            --color-slate-900: oklch(20.8% 0.042 265.755);
            --color-white: #fff;
            --spacing: 0.25rem;
            --text-xs: 0.75rem;
            --text-xs--line-height: calc(1 / 0.75);
            --text-sm: 0.875rem;
            --text-sm--line-height: calc(1.25 / 0.875);
            --text-lg: 1.125rem;
            --text-lg--line-height: calc(1.75 / 1.125);
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --tracking-tight: -0.025em;
            --tracking-widest: 0.1em;
            --leading-relaxed: 1.625;
            --default-transition-duration: 150ms;
            --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            --default-font-family: var(--font-sans);
            --default-mono-font-family: var(--font-mono);
          }
        }
        @layer base {
          *, ::after, ::before, ::backdrop, ::file-selector-button {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            border: 0 solid;
          }
          html, :host {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            tab-size: 4;
            font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji');
            font-feature-settings: var(--default-font-feature-settings, normal);
            font-variation-settings: var(--default-font-variation-settings, normal);
            -webkit-tap-highlight-color: transparent;
          }
          hr {
            height: 0;
            color: inherit;
            border-top-width: 1px;
          }
          abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted;
          }
          h1, h2, h3, h4, h5, h6 {
            font-size: inherit;
            font-weight: inherit;
          }
          a {
            color: inherit;
            -webkit-text-decoration: inherit;
            text-decoration: inherit;
          }
          b, strong {
            font-weight: bolder;
          }
          code, kbd, samp, pre, textarea {
            font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace);
            font-feature-settings: var(--default-mono-font-feature-settings, normal);
            font-variation-settings: var(--default-mono-font-variation-settings, normal);
            font-size: 1em;
          }
          small {
            font-size: 80%;
          }
          sub, sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
          }
          sub {
            bottom: -0.25em;
          }
          sup {
            top: -0.5em;
          }
          table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse;
          }
          :-moz-focusring {
            outline: auto;
          }
          progress {
            vertical-align: baseline;
          }
          summary {
            display: list-item;
          }
          ol, ul, menu {
            list-style: none;
          }
          img, svg, video, canvas, audio, iframe, embed, object {
            display: block;
            vertical-align: middle;
          }
          img, video {
            max-width: 100%;
            height: auto;
          }
          button, input, select, optgroup, textarea, ::file-selector-button {
            font: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            letter-spacing: inherit;
            color: inherit;
            border-radius: 0;
            background-color: transparent;
            opacity: 1;
          }
          :where(select:is([multiple], [size])) optgroup {
            font-weight: bolder;
          }
          :where(select:is([multiple], [size])) optgroup option {
            padding-inline-start: 20px;
          }
          ::file-selector-button {
            margin-inline-end: 4px;
          }
          ::placeholder {
            opacity: 1;
          }
          @supports (not (-webkit-appearance: -apple-pay-button)) or (contain-intrinsic-size: 1px) {
            ::placeholder {
              color: currentcolor;
              @supports (color: color-mix(in lab, red, red)) {
                color: color-mix(in oklab, currentcolor 50%, transparent);
              }
            }
          }
          textarea {
            resize: vertical;
          }
          ::-webkit-search-decoration {
            -webkit-appearance: none;
          }
          ::-webkit-date-and-time-value {
            min-height: 1lh;
            text-align: inherit;
          }
          ::-webkit-datetime-edit {
            display: inline-flex;
          }
          ::-webkit-datetime-edit-fields-wrapper {
            padding: 0;
          }
          ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
            padding-block: 0;
          }
          ::-webkit-calendar-picker-indicator {
            line-height: 1;
          }
          :-moz-ui-invalid {
            box-shadow: none;
          }
          button, input:where([type='button'], [type='reset'], [type='submit']), ::file-selector-button {
            appearance: button;
          }
          ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
            height: auto;
          }
          [hidden]:where(:not([hidden='until-found'])) {
            display: none!important;
          }
        }
        @layer utilities {
          .absolute {
            position: absolute;
          }
          .relative {
            position: relative;
          }
          .inset-0 {
            inset: calc(var(--spacing) * 0);
          }
          .z-10 {
            z-index: 10;
          }
          .z-20 {
            z-index: 20;
          }
          .flex {
            display: flex;
          }
          .h-4 {
            height: calc(var(--spacing) * 4);
          }
          .h-8 {
            height: calc(var(--spacing) * 8);
          }
          .h-\[calc\(100\%-57px\)\] {
            height: calc(100% - 57px);
          }
          .h-full {
            height: 100%;
          }
          .w-1 {
            width: calc(var(--spacing) * 1);
          }
          .w-1\.5 {
            width: calc(var(--spacing) * 1.5);
          }
          .w-8 {
            width: calc(var(--spacing) * 8);
          }
          .w-full {
            width: 100%;
          }
          .w-px {
            width: 1px;
          }
          .min-w-0 {
            min-width: calc(var(--spacing) * 0);
          }
          .flex-1 {
            flex: 1;
          }
          .flex-shrink-0 {
            flex-shrink: 0;
          }
          .cursor-col-resize {
            cursor: col-resize;
          }
          .flex-col {
            flex-direction: column;
          }
          .items-center {
            align-items: center;
          }
          .justify-between {
            justify-content: space-between;
          }
          .gap-3 {
            gap: calc(var(--spacing) * 3);
          }
          .gap-4 {
            gap: calc(var(--spacing) * 4);
          }
          .overflow-hidden {
            overflow: hidden;
          }
          .border-r {
            border-right-style: var(--tw-border-style);
            border-right-width: 1px;
          }
          .border-b {
            border-bottom-style: var(--tw-border-style);
            border-bottom-width: 1px;
          }
          .border-none {
            --tw-border-style: none;
            border-style: none;
          }
          .border-slate-200 {
            border-color: var(--color-slate-200);
          }
          .border-slate-800 {
            border-color: var(--color-slate-800);
          }
          .bg-blue-500 {
            background-color: var(--color-blue-500);
          }
          .bg-slate-100 {
            background-color: var(--color-slate-100);
          }
          .bg-slate-800 {
            background-color: var(--color-slate-800);
          }
          .bg-slate-800\/50 {
            background-color: color-mix(in srgb, oklch(27.9% 0.041 260.031) 50%, transparent);
            @supports (color: color-mix(in lab, red, red)) {
              background-color: color-mix(in oklab, var(--color-slate-800) 50%, transparent);
            }
          }
          .bg-slate-900 {
            background-color: var(--color-slate-900);
          }
          .bg-white {
            background-color: var(--color-white);
          }
          .p-6 {
            padding: calc(var(--spacing) * 6);
          }
          .px-4 {
            padding-inline: calc(var(--spacing) * 4);
          }
          .px-6 {
            padding-inline: calc(var(--spacing) * 6);
          }
          .py-2 {
            padding-block: calc(var(--spacing) * 2);
          }
          .py-3 {
            padding-block: calc(var(--spacing) * 3);
          }
          .text-lg {
            font-size: var(--text-lg);
            line-height: var(--tw-leading, var(--text-lg--line-height));
          }
          .text-sm {
            font-size: var(--text-sm);
            line-height: var(--tw-leading, var(--text-sm--line-height));
          }
          .text-xs {
            font-size: var(--text-xs);
            line-height: var(--tw-leading, var(--text-xs--line-height));
          }
          .text-\[10px\] {
            font-size: 10px;
          }
          .leading-relaxed {
            --tw-leading: var(--leading-relaxed);
            line-height: var(--leading-relaxed);
          }
          .font-bold {
            --tw-font-weight: var(--font-weight-bold);
            font-weight: var(--font-weight-bold);
          }
          .font-medium {
            --tw-font-weight: var(--font-weight-medium);
            font-weight: var(--font-weight-medium);
          }
          .font-semibold {
            --tw-font-weight: var(--font-weight-semibold);
            font-weight: var(--font-weight-semibold);
          }
          .tracking-tight {
            --tw-tracking: var(--tracking-tight);
            letter-spacing: var(--tracking-tight);
          }
          .tracking-widest {
            --tw-tracking: var(--tracking-widest);
            letter-spacing: var(--tracking-widest);
          }
          .text-blue-100\/90 {
            color: color-mix(in srgb, oklch(93.2% 0.032 255.585) 90%, transparent);
            @supports (color: color-mix(in lab, red, red)) {
              color: color-mix(in oklab, var(--color-blue-100) 90%, transparent);
            }
          }
          .text-blue-400 {
            color: var(--color-blue-400);
          }
          .text-blue-500 {
            color: var(--color-blue-500);
          }
          .text-slate-200 {
            color: var(--color-slate-200);
          }
          .text-slate-400 {
            color: var(--color-slate-400);
          }
          .text-slate-500 {
            color: var(--color-slate-500);
          }
          .text-white {
            color: var(--color-white);
          }
          .uppercase {
            text-transform: uppercase;
          }
          .opacity-0 {
            opacity: 0%;
          }
          .opacity-100 {
            opacity: 100%;
          }
          .transition {
            transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, -webkit-backdrop-filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
            transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
            transition-duration: var(--tw-duration, var(--default-transition-duration));
          }
          .transition-all {
            transition-property: all;
            transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
            transition-duration: var(--tw-duration, var(--default-transition-duration));
          }
          .transition-opacity {
            transition-property: opacity;
            transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
            transition-duration: var(--tw-duration, var(--default-transition-duration));
          }
          .select-none {
            -webkit-user-select: none;
            user-select: none;
          }
          .hover\:w-1\.5 {
            &:hover {
              @media (hover: hover) {
                width: calc(var(--spacing) * 1.5);
              }
            }
          }
          .hover\:text-white {
            &:hover {
              @media (hover: hover) {
                color: var(--color-white);
              }
            }
          }
          .focus\:ring-0 {
            &:focus {
              --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
              box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
            }
          }
          .focus\:outline-none {
            &:focus {
              --tw-outline-style: none;
              outline-style: none;
            }
          }
        }
        @property --tw-border-style {
          syntax: "*";
          inherits: false;
          initial-value: solid;
        }
        @property --tw-leading {
          syntax: "*";
          inherits: false;
        }
        @property --tw-font-weight {
          syntax: "*";
          inherits: false;
        }
        @property --tw-tracking {
          syntax: "*";
          inherits: false;
        }
        @property --tw-shadow {
          syntax: "*";
          inherits: false;
          initial-value: 0 0 #0000;
        }
        @property --tw-shadow-color {
          syntax: "*";
          inherits: false;
        }
        @property --tw-shadow-alpha {
          syntax: "<percentage>";
          inherits: false;
          initial-value: 100%;
        }
        @property --tw-inset-shadow {
          syntax: "*";
          inherits: false;
          initial-value: 0 0 #0000;
        }
        @property --tw-inset-shadow-color {
          syntax: "*";
          inherits: false;
        }
        @property --tw-inset-shadow-alpha {
          syntax: "<percentage>";
          inherits: false;
          initial-value: 100%;
        }
        @property --tw-ring-color {
          syntax: "*";
          inherits: false;
        }
        @property --tw-ring-shadow {
          syntax: "*";
          inherits: false;
          initial-value: 0 0 #0000;
        }
        @property --tw-inset-ring-color {
          syntax: "*";
          inherits: false;
        }
        @property --tw-inset-ring-shadow {
          syntax: "*";
          inherits: false;
          initial-value: 0 0 #0000;
        }
        @property --tw-ring-inset {
          syntax: "*";
          inherits: false;
        }
        @property --tw-ring-offset-width {
          syntax: "<length>";
          inherits: false;
          initial-value: 0px;
        }
        @property --tw-ring-offset-color {
          syntax: "*";
          inherits: false;
          initial-value: #fff;
        }
        @property --tw-ring-offset-shadow {
          syntax: "*";
          inherits: false;
          initial-value: 0 0 #0000;
        }
        @layer properties {
          @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
            *, ::before, ::after, ::backdrop {
              --tw-border-style: solid;
              --tw-leading: initial;
              --tw-font-weight: initial;
              --tw-tracking: initial;
              --tw-shadow: 0 0 #0000;
              --tw-shadow-color: initial;
              --tw-shadow-alpha: 100%;
              --tw-inset-shadow: 0 0 #0000;
              --tw-inset-shadow-color: initial;
              --tw-inset-shadow-alpha: 100%;
              --tw-ring-color: initial;
              --tw-ring-shadow: 0 0 #0000;
              --tw-inset-ring-color: initial;
              --tw-inset-ring-shadow: 0 0 #0000;
              --tw-ring-inset: initial;
              --tw-ring-offset-width: 0px;
              --tw-ring-offset-color: #fff;
              --tw-ring-offset-shadow: 0 0 #0000;
            }
          }
        }
    </style>

    <link rel="preconnect" href="https://james2doyle.github.io" />
    <link rel="dns-prefetch" href="https://james2doyle.github.io" />

    <link rel="preconnect" href="https://unpkg.com" />
    <link rel="dns-prefetch" href="https://unpkg.com" />

    <script defer src="https://unpkg.com/json-url@4.0.0/dist/browser/json-url.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body
    class="h-full overflow-hidden text-slate-200 select-none"
    x-data="playground"
    @mousemove="resize"
    @mouseup="stopResizing"
    @mouseleave="stopResizing"
>

    <!-- Header -->
    <header class="flex items-center justify-between px-6 py-3 border-b border-slate-800 bg-slate-900 z-20">
        <div class="flex items-center gap-3">
            <svg class="h-8 w-8 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            <h1 class="text-lg font-bold tracking-tight text-white">Alpine<span class="text-blue-400">Play</span></h1>
        </div>
        <div class="flex items-center gap-4">
            <button type="button" @click="$confirm('Are you sure?').then(() => resetCode())" class="text-xs font-medium text-slate-400 hover:text-white transition">Reset</button>
                    <button type="button" @click="$clipboard(code).then(() => handleCopy())" class="text-xs font-medium text-slate-400 hover:text-white transition" :class="{ 'text-white': copyComplete }">
                        <span x-show="!copyComplete">Copy</span>
                        <span x-show="copyComplete">Copied!</span>
                    </button>
                    <button type="button" @click="updateUrl" class="text-xs font-medium text-slate-400 hover:text-white transition" :class="{ 'text-white': saved }">
                        <span x-show="!saved">Save</span>
                        <span x-show="saved">Saved!</span>
                    </button>
            <div class="h-4 w-px bg-slate-800"></div>
            <span class="text-xs text-slate-500" x-text="status"></span>
        </div>
    </header>

    <main class="flex h-[calc(100%-57px)] w-full overflow-hidden relative">
        <!-- Editor Section -->
        <div
            class="relative flex flex-col min-w-0 h-full border-r border-slate-800 bg-slate-900"
            :style="`width: ${splitWidth}%`"
        >
            <div class="flex items-center justify-between px-4 py-2 bg-slate-800/50 text-[10px] uppercase tracking-widest font-semibold text-slate-500">
                <div>HTML + Alpine.js</div>
            </div>
            <textarea
                x-model="code"
                @input="handleInput"
                spellcheck="false"
                class="editor-textarea flex-1 w-full p-6 bg-slate-900 focus:outline-none focus:ring-0 text-sm leading-relaxed text-blue-100/90"
            ></textarea>
        </div>

        <!-- Resize Handle -->
        <div
            @mousedown="startResizing"
            class="resizer w-1 hover:w-1.5 transition-all bg-slate-800 cursor-col-resize h-full z-10 flex-shrink-0"
            :class="isResizing ? 'bg-blue-500 w-1.5' : ''"
        ></div>

        <!-- Preview Section -->
        <div
            class="flex flex-col min-w-0 h-full bg-white relative"
            :style="`width: ${100 - splitWidth}%`"
        >
            <!-- Overlay to prevent iframe from intercepting mouse events while resizing -->
            <div
                x-show="isResizing"
                class="absolute inset-0 z-20"
                style="background: transparent;"
            ></div>

            <div class="flex items-center justify-between px-4 py-2 bg-slate-100 text-[10px] uppercase tracking-widest font-semibold text-slate-500 border-b border-slate-200">
                Preview
                <span :class="isUpdating ? 'opacity-100' : 'opacity-0'" class="transition-opacity text-blue-500 font-bold">Updating...</span>
            </div>
            <div class="flex-1 relative overflow-hidden">
                <iframe
                    id="preview-frame"
                    class="w-full h-full border-none"
                ></iframe>
            </div>
        </div>
    </main>

    <script>
        const makeContent = (code) => `
            <!DOCTYPE html>
            <html>
                <head>
                    <link rel="preconnect" href="https://unpkg.com" />
                    <link rel="dns-prefetch" href="https://unpkg.com" />
                    <link rel="preconnect" href="https://cdn.tailwindcss.com" />
                    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com" />
                    <script src="https://cdn.tailwindcss.com"><\/script>
                    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"><\/script>
                    <style>
                        body { margin: 0; padding: 0; background-color: white; overflow-x: hidden; }
                        [x-cloak] { display: none !important; }
                    </style>
                </head>
                <body>
                    ${code}
                </body>
            </html>
        `;

        const defaultCode = `<!-- Try creating a counter! -->\n<div x-data="{ count: 0 }" class="p-8 text-center font-sans">\n    <h1 class="text-4xl font-bold mb-4" x-text="count"></h1>\n    \n    <div class="flex gap-2 justify-center">\n        <button \n            @click="count--"\n            class="px-4 py-2 bg-slate-200 rounded hover:bg-slate-300 transition"\n        >Decrease</button>\n\n        <button \n            @click="count++"\n            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"\n        >Increase</button>\n    </div>\n\n    <p class="mt-4 text-slate-500 text-sm italic" x-show="count > 10">\n        That's a lot of clicks!\n    </p>\n</div>`;

        document.addEventListener('alpine:init', () => {
            const compressor = JsonUrl('lzma');

            /**
             * Alpine.js magic property to write text to the clipboard.
             *
             * Usage:  @click="$clipboard(stringToCopy).then(copied = true)"
             *
             * @returns {(subject: string) => Promise<void>} - A function that takes the text to copy as an argument.
             */
            Alpine.magic('clipboard', () => {
                return (subject) => navigator.clipboard.writeText(subject);
            });

            /**
             * Alpine.js magic property to confirm a change.
             *
             * Usage:  @click="$confirm('Are you sure?').then(copied = true)"
             *
             * @returns {(message: string) => Promise<void>} - A function that takes the text to display as an argument.
             */
            Alpine.magic('confirm', () => {
                return (message) => {
                    return new Promise((resolve, reject) => {
                        if (confirm(message)) {
                            resolve();
                        } else {
                            reject();
                        }
                    });
                };
            });

            Alpine.data('playground', () => ({
                code: '',
                status: 'Ready',
                isUpdating: false,
                copyComplete: false,
                saved: false,
                fromUrl: (new URLSearchParams(window.location.search)).get('s'),
                timeout: null,

                // Resizing logic state
                splitWidth: 50, // percentage
                isResizing: false,

                init() {
                    if (this.fromUrl) {
                        compressor.decompress(this.fromUrl).then((output) => {
                            this.code = output;
                            this.updatePreview();
                        });
                    } else {
                        this.code = defaultCode;
                    }

                    Alpine.nextTick(() => {
                        // this.code = defaultCode;
                        this.updatePreview();
                    });
                },

                handleInput() {
                    this.status = 'Typing...';
                    this.isUpdating = true;

                    clearTimeout(this.timeout);
                    this.timeout = setTimeout(() => {
                        this.updatePreview();
                        this.status = 'Synced';
                        this.isUpdating = false;
                        this.copyComplete = false;
                        this.saved = false;
                    }, 500);
                },

                handleCopy() {
                    this.copyComplete = true;

                    clearTimeout(this.timeout);
                    this.timeout = setTimeout(() => {
                        this.copyComplete = false;
                    }, 2000);
                },

                updatePreview() {
                    const frame = document.getElementById('preview-frame');
                    if (!frame) return;

                    const frameDoc = frame.contentDocument || frame.contentWindow.document;

                    frameDoc.open();
                    frameDoc.write(makeContent(this.code));
                    frameDoc.close();
                },

                // Resize methods
                startResizing() {
                    this.isResizing = true;
                },

                stopResizing() {
                    this.isResizing = false;
                },

                resize(e) {
                    if (!this.isResizing) return;

                    // Calculate percentage based on mouse position
                    const percentage = (e.clientX / window.innerWidth) * 100;

                    // Constrain between 20% and 80%
                    if (percentage > 20 && percentage < 80) {
                        this.splitWidth = percentage;
                    }
                },

                resetCode() {
                    this.code = defaultCode;
                    this.isUpdating = false;
                    this.copyComplete = false;
                    this.saved = false;
                    const url = new URL(window.location);
                    url.searchParams.set("s", "");
                    window.history.pushState({}, "", url);

                    this.updatePreview();
                },

                updateUrl() {
                    compressor.compress(this.code).then(output => {
                        this.saved = true;

                        clearTimeout(this.timeout);
                        this.timeout = setTimeout(() => {
                            this.saved = false;
                        }, 2000);

                        const url = new URL(window.location);
                        url.searchParams.set("s", output);
                        window.history.pushState({}, "", url);
                    });
                },
            }));
        });
    </script>
</body>
</html>